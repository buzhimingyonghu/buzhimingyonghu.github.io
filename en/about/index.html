<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="ðŸ‘‹ Hi, I&rsquo;m Liu Hengsheng From School of Information Engineering, Xi&rsquo;an University of Finance and Economics
ðŸ’¼ Work Experience KV Database Engineer @ Qihoo 360 (Beijing HQ) Pika is a high-performance, high-capacity, multi-tenant KV storage system with data persistence, fully compatible with Redis protocol, and has gained over 5.9k stars on GitHub.
Pika Master-Slave Consistency Development: Pika&rsquo;s master-slave replication originally used asynchronous catch-up replication. When the master node fails, the newly elected master may not have complete data. For scenarios requiring high data integrity, a strong consistency protocol was needed. After discussion with team members, I independently led the consistency development using the PacificA protocol.
" />
<meta name="keywords" content="Victor, Blog, Tech, Life" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="http://localhost:1313/en/about/" />


    <title>
        
            About Me :: Victor&#39;s World 
        
    </title>





  <link rel="stylesheet" href="/main.min.244183cde1a38e0b08f82c11791181288f9aac1cc9618cd6f4e9e7710c5768ba.css" integrity="sha256-JEGDzeGjjgsI&#43;CwReRGBKI&#43;arBzJYYzW9OnncQxXaLo=" crossorigin="anonymous">





    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">



  <meta itemprop="name" content="About Me">
  <meta itemprop="description" content="ðŸ‘‹ Hi, Iâ€™m Liu Hengsheng From School of Information Engineering, Xiâ€™an University of Finance and Economics
ðŸ’¼ Work Experience KV Database Engineer @ Qihoo 360 (Beijing HQ) Pika is a high-performance, high-capacity, multi-tenant KV storage system with data persistence, fully compatible with Redis protocol, and has gained over 5.9k stars on GitHub.
Pika Master-Slave Consistency Development: Pikaâ€™s master-slave replication originally used asynchronous catch-up replication. When the master node fails, the newly elected master may not have complete data. For scenarios requiring high data integrity, a strong consistency protocol was needed. After discussion with team members, I independently led the consistency development using the PacificA protocol.">
  <meta itemprop="datePublished" content="2024-03-21T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-03-21T00:00:00+00:00">
  <meta itemprop="wordCount" content="923">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="About Me">
  <meta name="twitter:description" content="ðŸ‘‹ Hi, Iâ€™m Liu Hengsheng From School of Information Engineering, Xiâ€™an University of Finance and Economics
ðŸ’¼ Work Experience KV Database Engineer @ Qihoo 360 (Beijing HQ) Pika is a high-performance, high-capacity, multi-tenant KV storage system with data persistence, fully compatible with Redis protocol, and has gained over 5.9k stars on GitHub.
Pika Master-Slave Consistency Development: Pikaâ€™s master-slave replication originally used asynchronous catch-up replication. When the master node fails, the newly elected master may not have complete data. For scenarios requiring high data integrity, a strong consistency protocol was needed. After discussion with team members, I independently led the consistency development using the PacificA protocol.">



    <meta property="og:url" content="http://localhost:1313/en/about/">
  <meta property="og:site_name" content="Victor&#39;s World">
  <meta property="og:title" content="About Me">
  <meta property="og:description" content="ðŸ‘‹ Hi, Iâ€™m Liu Hengsheng From School of Information Engineering, Xiâ€™an University of Finance and Economics
ðŸ’¼ Work Experience KV Database Engineer @ Qihoo 360 (Beijing HQ) Pika is a high-performance, high-capacity, multi-tenant KV storage system with data persistence, fully compatible with Redis protocol, and has gained over 5.9k stars on GitHub.
Pika Master-Slave Consistency Development: Pikaâ€™s master-slave replication originally used asynchronous catch-up replication. When the master node fails, the newly elected master may not have complete data. For scenarios requiring high data integrity, a strong consistency protocol was needed. After discussion with team members, I independently led the consistency development using the PacificA protocol.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2024-03-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-03-21T00:00:00+00:00">






    <meta property="article:published_time" content="2024-03-21 00:00:00 &#43;0000 UTC" />












    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text ">
                Victor&#39;s World</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/en/about">About</a></li><li><a href="/en/posts">Blog</a></li><li><a href="https://github.com/buzhimingyonghu">GitHub</a></li>
        <ul class="submenu">
            <li class="dropdown">
                <a href="javascript:void(0)" class="dropbtn">en</a>
                <div class="dropdown-content">
                        
                            <a title="zh" href="http://localhost:1313/about/">zh</a>
                        
                </div>
            </li>
        </ul>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
                Also available in
                
                    <a href="http://localhost:1313/about/"><span class="flag fi fi-"></span></a>
                
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="http://localhost:1313/en/about/">About Me</a></h2>

            
            
            

            <div class="post-content">
                <h1 id="-hi-im-liu-hengsheng">ðŸ‘‹ Hi, I&rsquo;m Liu Hengsheng</h1>
<p>From School of Information Engineering, Xi&rsquo;an University of Finance and Economics</p>
<h2 id="-work-experience">ðŸ’¼ Work Experience</h2>
<h3 id="kv-database-engineer--qihoo-360-beijing-hq">KV Database Engineer @ Qihoo 360 (Beijing HQ)</h3>
<p><em>Pika is a high-performance, high-capacity, multi-tenant KV storage system with data persistence, fully compatible with Redis protocol, and has gained over 5.9k stars on GitHub.</em></p>
<h4 id="pika-master-slave-consistency-development">Pika Master-Slave Consistency Development:</h4>
<p><em>Pika&rsquo;s master-slave replication originally used asynchronous catch-up replication. When the master node fails, the newly elected master may not have complete data. For scenarios requiring high data integrity, a strong consistency protocol was needed. After discussion with team members, I independently led the consistency development using the PacificA protocol.</em></p>
<ul>
<li>
<p><strong>PacificA Master-Slave Data Consistency Flow</strong>: Redesigned the entire master-slave data interaction process, including MetaSync for metadata synchronization, TrySync for data integrity verification, full/incremental synchronization, Candidate role assignment, and BinlogSync using logs and heartbeats to ensure data replication across four core stages.</p>
</li>
<li>
<p><strong>Logical Replication Implementation</strong>: Master node handles log appending and commit point advancement, while slave nodes write data according to commit points, ensuring master-slave consistency.</p>
</li>
<li>
<p><strong>Distributed Log Storage System</strong>: Implemented Write-Ahead Logging, updating memory structures after log writing, with periodic checkpoints to prevent unlimited log growth. Log truncation after checkpoints reduces storage pressure. Log replay mechanism ensures high availability during system crashes.</p>
</li>
<li>
<p><strong>Failure Recovery and State Coordination</strong>: During new master election, all replicas align their preparedID with the new master&rsquo;s preparedID. New master commits all prepared logs to ensure preparedID and committedID consistency. Write request flow: writes binlog first, waits for all slaves to append logs, then executes database writes to prevent data loss or rollback failures. Timeout cases are recorded for exit, ensuring data consistency and high availability after recovery, maintaining fault tolerance even with n-1 node failures.</p>
</li>
</ul>
<h4 id="pika-operator-development">Pika-Operator Development</h4>
<p><em>Pika-Operator, developed using kubeblocks, provides a decentralized, modular architecture with two cluster modes, cluster deployment, and dynamic scaling.</em></p>
<ul>
<li><strong>Master-Slave Cluster Optimization</strong>: Upgraded K8s cluster with latest Operator, added Role module and optimized Pika master-slave process, resolving Pod failure issues.</li>
<li><strong>Backup and Recovery Components</strong>: Studied Pika&rsquo;s Bgsave process, implemented BackupPolicy, integrated CSI and S3 for automated backup and recovery.</li>
</ul>
<h4 id="bug-fixes-for-dba-production-issues">Bug Fixes for DBA Production Issues:</h4>
<p>Fixed ACL permission issues for regular users, developed pika-export version management, assisted in resolving slow command timing statistics.</p>
<p><strong>Personal Summary</strong>: I deeply studied the system source code, gained clear understanding of Pika&rsquo;s multi-threading model and master-slave architecture, thoroughly learned Kubernetes, Docker, and Operator-related knowledge, studied and summarized Microsoft&rsquo;s PacificA paper, and actively discussed with team members.</p>
<h2 id="-open-source-contributions">ðŸŒŸ Open Source Contributions</h2>
<h3 id="tencent-rhinobird-plan---load-balancing-plugin">Tencent RhinoBird Plan - Load Balancing Plugin</h3>
<p><em>Issue description: Implement IP direct connection load balancing plugin - weighted round-robin algorithm, distributing requests to different servers by weight allocation to maximize cluster request processing capacity</em></p>
<p>SWRR adjusts server weights during each round of allocation to avoid short-term load concentration, ensuring request distribution proportional to server weights. Wrote unit tests, passed async selection and dynamic endpoint handling scenarios.</p>
<h3 id="alibaba-tianchi-cloud-native-challenge---oceanbase">Alibaba Tianchi Cloud Native Challenge - OceanBase</h3>
<p><em>Issue description: When oblogminer processes obcdc output, it uses markers for uncertain column values to indicate potential inaccuracy</em></p>
<p>Fixed inaccurate NULL markers for LOB type logs, resolved unreliable results for other column types in MINIMAL mode, code now checks source of each column value.</p>
<h2 id="-project-experience">ðŸš€ Project Experience</h2>
<h3 id="bustub-vectordb-database-development">Bustub Vectordb Database Development</h3>
<p><strong>2024.10 - 2024.11</strong></p>
<p><em>Bustub_Vectordb is a CMU-DB based BusTub system supporting vector storage and similarity search in relational databases</em></p>
<ul>
<li>
<p><strong>Vector Storage and Similarity Calculation</strong>: Implemented Vector storage supporting L2, cosine similarity, negative inner product vector distance calculations for efficient storage and querying of large-scale vector data.</p>
</li>
<li>
<p><strong>Query Execution Optimization</strong>: Implemented SeqScanExecutor and InsertExecutor, supporting basic sequential scanning and data insertion. Optimized Naive k-NN search and TopNExecutor for fast similar vector retrieval. Enhanced VectorIndexScanExecutor for vector index queries.</p>
</li>
<li>
<p><strong>IVFFlat Index</strong>: Implemented IVFFlat index using K-means clustering, assigning vectors to different clusters to accelerate vector similarity search for approximate nearest neighbor queries.</p>
</li>
<li>
<p><strong>HNSW Index</strong>: Implemented hierarchical HNSW index, building upon NSW with multi-layer structure, performing layer-by-layer search from sparse to dense layers with local greedy search, significantly improving vector approximate nearest neighbor query efficiency.</p>
</li>
</ul>
<h3 id="mit-65840-distributed-systems-implementation">MIT 6.5840 Distributed Systems Implementation</h3>
<p><strong>2024.08 - 2024.09</strong>
<em>6.5840 covers distributed systems concepts and implementation techniques, including fault tolerance, replication, and consistency</em></p>
<ul>
<li>
<p><strong>Distributed MapReduce</strong>: Consists of one Coordinator and multiple Workers, implementing high-performance MapReduce processing in distributed systems through Map/Reduce Task distribution.</p>
</li>
<li>
<p><strong>Key/Value Server</strong>: Handles three RPC operations: Put, Append, and Get, maintaining key-value pairs in server memory, enhancing consistency and stability under high concurrency through linearization.</p>
</li>
<li>
<p><strong>RequestVote RPC Implementation</strong>: Used for initial election, re-election after disconnection, and heartbeat mechanism, ensuring only one Leader per term.</p>
</li>
<li>
<p><strong>AppendEntries RPC Implementation</strong>: Enables Leader to append logs to Followers, marking logs as committed after majority acceptance. Leader notifies Followers of committed logs via heartbeat and triggers server application.</p>
</li>
<li>
<p><strong>Persistence Mechanism</strong>: Ensures correct Leader election and committed log consistency even after network partitions or node restarts.</p>
</li>
<li>
<p><strong>Snapshot Mechanism</strong>: Consolidates long logs into snapshots, implements InstallSnapshot RPC to handle cases where Followers cannot append old logs.</p>
</li>
</ul>
<h3 id="psm-probabilistic-matching-system-based-on-simhash">PSM Probabilistic Matching System Based on Simhash</h3>
<p><strong>2024.06 - 2024.07</strong></p>
<p><em>The probabilistic Simhash matching system efficiently detects approximate duplicates using Simhash technology for rapid identification of highly similar objects.</em></p>
<ul>
<li>
<p><strong>High-dimensional Feature Vector Mapping</strong>: Maps high-dimensional feature vectors to shorter binary codes, using Simhash-generated hash values to calculate Hamming distance for matching.</p>
</li>
<li>
<p><strong>Approximate Duplicate Detection</strong>: Implements linear approximate duplicate detection by comparing Hamming distances between Simhash values against thresholds.</p>
</li>
<li>
<p><strong>System Optimization</strong>: Created indexes for data processing, dividing by first p bits of each Simhash. Calculated bit weights to identify easily flippable bits, generating combinations of k weakest bits. Achieved 48.90% time efficiency improvement with 10k data points.</p>
</li>
</ul>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
            
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js" integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc&#43;cxaJzDdCYbAW0X1G&#43;DgZYvtKFXe6MBex8jUJ2JT25mQx&#43;YjACIng=="></script>




    </body>
</html>
